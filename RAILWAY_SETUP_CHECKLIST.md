# üöÇ Railway Setup Checklist - –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## ‚ùå –ì–õ–ê–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –ù–ï–¢ QUERIES –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è!**

–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ:
- ‚ùå –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö 0 searches/queries
- ‚ùå –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö 0 items
- ‚ùå –ë–µ–∑ queries –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –Ω–∏—á–µ–≥–æ –Ω–∞–π—Ç–∏
- ‚ùå –ë–µ–∑ items –±–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –Ω–∏—á–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Railway

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Environment Variables

–í Railway Dashboard ‚Üí Variables –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:

```bash
# PostgreSQL (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è Railway)
DATABASE_URL=postgresql://user:pass@host:5432/database

# Telegram Bot
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=-1001234567890

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
SEARCH_INTERVAL=300  # 5 –º–∏–Ω—É—Ç –º–µ–∂–¥—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
```

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Variables
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–ø—É—â–µ–Ω—ã

–í `Procfile` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
web: gunicorn --bind 0.0.0.0:$PORT --timeout 30 --log-level info wsgi:application
worker: python kufar_notifications.py worker
```

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. Railway Dashboard ‚Üí Deployments
2. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –î–í–ê –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞:
   - ‚úÖ **web** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - ‚úÖ **worker** - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–í–ê–ñ–ù–û:** –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ **web** - worker –Ω–µ –∑–∞–ø—É—â–µ–Ω!

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ Query —á–µ—Ä–µ–∑ Web UI

**–≠–¢–û –°–ê–ú–û–ï –í–ê–ñ–ù–û–ï!** –ë–µ–∑ queries –±–æ—Ç –Ω–µ –±—É–¥–µ—Ç –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å!

1. –û—Ç–∫—Ä–æ–π—Ç–µ Web UI: `https://your-app.railway.app/queries`
2. –ù–∞–∂–º–∏—Ç–µ "Add New Query" (—Ñ–æ—Ä–º–∞ —Å–≤–µ—Ä—Ö—É)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Kufar URL**: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –ø–æ–∏—Å–∫–∞ —Å kufar.by
     - –ü—Ä–∏–º–µ—Ä: `https://www.kufar.by/l/odezda-i-obuv/odezhda/muzhskaya-odezhda?sort=lst.d`
   - **Name** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
   - **Thread ID** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ID —Ç—Ä–µ–¥–∞ –≤ Telegram –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ç–æ–ø–∏–∫–∏
4. –ù–∞–∂–º–∏—Ç–µ "Add Query"
5. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ query –∞–∫—Ç–∏–≤–µ–Ω** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–π toggle "Active"

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Worker –ø—Ä–æ—Ü–µ—Å—Å–∞

–í Railway Dashboard ‚Üí Logs –≤—ã–±–µ—Ä–∏—Ç–µ **worker** –ø—Ä–æ—Ü–µ—Å—Å:

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:**
```
üîç === Starting search and notification cycle ===
üéØ Step 1: Searching for new items...
‚è∞ Current time: 15:30:45
Search completed: {'new_items': 3, 'failed_searches': 0}
Step 2: Sending Telegram notifications...
Notifications sent: {'total_items': 3, 'sent_successfully': 3, 'failed_items': 0}
=== Search and notification cycle completed ===
```

**–ï—Å–ª–∏ –ù–ï –≤–∏–¥–∏—Ç–µ —ç—Ç–∏—Ö –ª–æ–≥–æ–≤:**
- Worker –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ò–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö queries

### –®–∞–≥ 5: –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–≤–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è query:
1. Worker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –°–†–ê–ó–£
3. –ù–∞–π–¥–µ–Ω–Ω—ã–µ items –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –ë–î
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Telegram

**–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è:** 1-5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è query

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Queries –≤ –±–∞–∑–µ

–û—Ç–∫—Ä–æ–π—Ç–µ `/queries` –≤ Web UI:
- ‚úÖ –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω query
- ‚úÖ Toggle –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–º (Active)
- ‚úÖ –í –∫–æ–ª–æ–Ω–∫–µ "Items" –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö items

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Items –≤ –±–∞–∑–µ

–û—Ç–∫—Ä–æ–π—Ç–µ `/items` –≤ Web UI:
- –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- –ï—Å–ª–∏ –ø—É—Å—Ç–æ - query –Ω–µ –Ω–∞—à–µ–ª –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Logs worker –ø—Ä–æ—Ü–µ—Å—Å–∞

Railway Dashboard ‚Üí Logs ‚Üí worker:
```
‚úÖ "Starting search and notification cycle"
‚úÖ "Search completed: {'new_items': X}"
‚úÖ "Sending Telegram notifications"
‚úÖ "Sent notification for item..."
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: Telegram

–í –≤–∞—à–µ–º Telegram —á–∞—Ç–µ/–≥—Ä—É–ø–ø–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å:
- –§–æ—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- –ù–∞–∑–≤–∞–Ω–∏–µ
- –¶–µ–Ω–∞
- –ö–Ω–æ–ø–∫–∞ "Open Kufar"

## ‚ùå –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "No queries found" –≤ Web UI

**–ü—Ä–∏—á–∏–Ω–∞:** Queries –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—á–∏—Å—Ç–∏–ª–∞—Å—å

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ query —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –≤ `/queries`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL (–Ω–µ SQLite)
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DATABASE_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Railway

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Worker –ª–æ–≥–æ–≤ –Ω–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** Worker –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Procfile —Å–æ–¥–µ—Ä–∂–∏—Ç `worker: python kufar_notifications.py worker`
2. –í Railway Dashboard ‚Üí Settings —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ worker –Ω–µ –æ—Ç–∫–ª—é—á–µ–Ω
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ deployment

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Queries –µ—Å—Ç—å, –Ω–æ items –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** URL query –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–ª–∏ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Kufar.by –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
4. –í—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç URL –≤ —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è query

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Items –Ω–∞–π–¥–µ–Ω—ã, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ –≤ Telegram –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TELEGRAM_BOT_TOKEN –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TELEGRAM_CHAT_ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç/–≥—Ä—É–ø–ø—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ worker –Ω–∞ –æ—à–∏–±–∫–∏ Telegram API

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite –≤–º–µ—Å—Ç–æ PostgreSQL

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ PostgreSQL plugin –≤ Railway
2. DATABASE_URL –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `postgresql://`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã

–°–æ–≥–ª–∞—Å–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ:

```
‚úÖ –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (JOIN ‚Üí LEFT JOIN)
‚úÖ Telegram –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OK (bot_token, chat_id)
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ get_unsent_items() —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ TelegramWorker —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

‚ùå –ù–ï–¢ QUERIES –í –ë–ê–ó–ï –î–ê–ù–ù–´–•! (0 searches)
‚ùå –ù–ï–¢ ITEMS –í –ë–ê–ó–ï –î–ê–ù–ù–´–•! (0 items)

–†–ï–®–ï–ù–ò–ï: –î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω query —á–µ—Ä–µ–∑ Web UI!
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (TL;DR)

1. **Railway Variables:**
   - DATABASE_URL ‚úÖ
   - TELEGRAM_BOT_TOKEN ‚úÖ
   - TELEGRAM_CHAT_ID ‚úÖ

2. **–î–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–ø—É—â–µ–Ω—ã:**
   - web ‚úÖ
   - worker ‚úÖ

3. **–î–æ–±–∞–≤—å—Ç–µ query:**
   - `/queries` ‚Üí Add New Query ‚úÖ
   - –í—Å—Ç–∞–≤—å—Ç–µ URL —Å kufar.by ‚úÖ
   - –£–±–µ–¥–∏—Ç–µ—Å—å query –∞–∫—Ç–∏–≤–µ–Ω ‚úÖ

4. **–î–æ–∂–¥–∏—Ç–µ—Å—å:**
   - –ü–µ—Ä–≤–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (1-5 –º–∏–Ω) ‚è≥
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram üì±

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 5 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ SEARCH_INTERVAL)
- **–§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:** –§–æ—Ç–æ + —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ë–î –∏ Railway Logs

---

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å!** ‚úÖ
